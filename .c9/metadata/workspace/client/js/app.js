{"changed":true,"filter":false,"title":"app.js","tooltip":"/client/js/app.js","value":"$.ajaxSetup({\n    //async : false,\n    beforeSend : function(jqXHR, textStatus) {\n        $('#loadingModal').modal('show');\n    },\n    complete : function(jqXHR, textStatus) {\n        $('#loadingModal').modal('hide');\n    },\n    error : function(jqXHR, textStatus, errorThrown ) {\n        console.log('error');\n        //$('#loadingModal').modal('hide');\n        if (jqXHR.status == 404) {\n            Bridge.msg(\"サーバーとの通信時にエラーが発生しました。\");\n        }\n        log(textStatus + \" : \" + errorThrown);\n    }\n});\n\n//## Bridge\nBridge.idName = '_id';\n\n\nvar commonConn = new Bridge.Connector({\n    //url: navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/) ? \"https://bridge-c9-choish.c9.io/bridge\" : \"/bridge\"});\n    url: navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)\n                 ?  ((document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1) ? \"https:\" : \"\") + \"//ykcform.herokuapp.com/bridge\" : \"/bridge\"});\n\nvar commonModel = {\n    _id : null,\n\tsignup: {click: function(e) {\n\t    Bridge.tmplTool.render('login', {isSignup: true});\n\t}},\n\tsignupInsert: {click: function(e) {\n\t\tvar template = $(e.target).parents('.br-tmpl');\n        var obj = Bridge.tmplTool.editor(template, {\n            login_id : {validateRule : {label: 'ID', isNullAble : false}},\n            name : {validateRule : {label: 'ID', isNullAble : false}},\n            password : {validateRule : {label: 'パスワード', isNullAble : false}},\n            password2 : {validateRule : {label: 'パスワード確認', isNullAble : false}},\n            //email : {validateRule : {label: 'E-mail', patterns : 'email'}},\n            renderMessage : function(strArray) {\n                //Bridge.tmplTool.render('message', {msg : strArray.join('<br/>')});\n                alert(strArray.join('\\n'));\n            },\n            clearError : function(strArray) {\n\n            }\n        });\n        \n\t    if (obj.validate()) {\n            commonConn.reqExecMethod('reqExecSignup', 'signup', obj.data).request(function(data) {\n                \n                if (data['reqExecSignup'][Bridge.idName]) {\n                    Bridge.tmplTool.render('login', {isSignup: false});\n                    commonModel.messageAreaReset({msg : 'ユーザーを登録しました。'});\n                } else {\n                    commonModel.messageAreaReset(data['reqExecSignup']);\n                }\n            });\n\t    }\n\t}},\n\tsignupCancel: {click: function(e) {\n\t    Bridge.tmplTool.render('login', {isSignup: false});\n\t}},\n    login: {click: function(e) {\n        var template = $(e.target).parents('.br-tmpl');\n        var obj = Bridge.tmplTool.editor(template);\n        Bridge.localStorageTool.push('keepLogin', obj.data.keep_login);\n        //Bridge.sessionStorageTool.push('keepLogin', obj.data.keep_login);\n        commonConn.reqExecMethod('reqExecLogin', 'login', obj.data).request(function(data) {\n            commonModel._id = data['reqExecLogin'][Bridge.idName];\n            if (commonModel._id) {\n                //console.log(data['reqExecLogin']);\n                commonModel.loginChecker();\n                commonModel.loginAfter(data['reqExecLogin']);\n            } else {\n                commonModel.messageAreaReset(data['reqExecLogin']);\n            }\n\n        });\n    }},\n    loginAfter: function(data) {\n\t\t//Bridge.tmplTool.render('mainMenu', {});\n    },\n    logout: {click: function(e) {\n        var template = $(e.target).parent('.br-tmpl');\n        var obj = Bridge.tmplTool.editor(template);\n        commonConn.reqExecMethod('reqExecLogout', 'logout', obj.data).request(function(data) {\n            //console.log(data['reqExecLogout']);\n            commonModel.logoutAfter(data['reqExecLogout']);\n        });\n    }},\n    logoutAfter: function(data) {\n        //Bridge.tmplTool.reset({login: {keep_login : Bridge.localStorageTool.get('keepLogin')}, mainMenu: null});\n    },\n    viewport: {change: function(e) {\n        var value = e.target.value;\n        localStorage['viewport_scale'] = e.target.value;\n        $('meta[name=\"viewport\"]').attr('content', 'width=device-width, initial-scale=' + value + ', maximum-scale=' + value + ', user-scalable=no');\n    }, setScale: function(value) {\n        $('meta[name=\"viewport\"]').attr('content', 'width=device-width, initial-scale=' + value + ', maximum-scale=' + value + ', user-scalable=no');\n    }},\n    \n    loginChecker: function() {\n        commonConn.reqExecMethod('loginChecker', 'loginChecker').request(function(data) {\n            data.loginChecker['keep_login'] = Bridge.localStorageTool.get('keepLogin');\n\t\t\tif (data.loginChecker[Bridge.idName]) {\n\t\t\t    commonModel._id = data.loginChecker[Bridge.idName];\n\t\t\t\tBridge.tmplTool.render('loginUser', data['loginChecker']);\n\t\t\t\tcommonModel.loginCheckerAfter(data.loginChecker);\n\t\t\t} else {\n\t\t\t    commonModel.loginCheckerFail(data.loginChecker);\n\t\t\t}\n        });\n    },\n    loginCheckerAfter: function(data) {\n        //Bridge.tmplTool.reset({login: {keep_login : Bridge.localStorageTool.get('keepLogin')}, mainMenu: null});\n    },\n    loginCheckerFail: function(data) {\n        //Bridge.tmplTool.reset({login: {keep_login : Bridge.localStorageTool.get('keepLogin')}, mainMenu: null});\n    },\n    messageAreaReset: function(data) {\n        data = data || {};\n        Bridge.tmplTool.render('message', {msg : data.msg || data.error || data.warm});\n    }\n};","undoManager":{"mark":97,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":115,"column":33},"end":{"row":115,"column":35},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":35},"end":{"row":115,"column":36},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":36},"end":{"row":115,"column":37},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":37},"end":{"row":117,"column":5},"action":"insert","lines":["","        ","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":117,"column":5},"end":{"row":117,"column":6},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":62},"end":{"row":111,"column":43},"action":"remove","lines":["","\t\t\t\tBridge.tmplTool.render('mainMenu', {});"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":8},"end":{"row":116,"column":43},"action":"insert","lines":["","\t\t\t\tBridge.tmplTool.render('mainMenu', {});"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":3},"end":{"row":116,"column":4},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":2},"end":{"row":116,"column":3},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":37},"end":{"row":115,"column":8},"action":"remove","lines":["","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":34},"end":{"row":114,"column":35},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":35},"end":{"row":114,"column":36},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":36},"end":{"row":114,"column":37},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":37},"end":{"row":114,"column":38},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":62},"end":{"row":111,"column":0},"action":"insert","lines":["",""]},{"start":{"row":111,"column":0},"end":{"row":111,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":4},"end":{"row":111,"column":23},"action":"insert","lines":["loginAreaResetAfter"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":23},"end":{"row":111,"column":25},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":25},"end":{"row":111,"column":26},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":4},"end":{"row":111,"column":15},"action":"insert","lines":["commonModel"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":15},"end":{"row":111,"column":16},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":36},"end":{"row":111,"column":40},"action":"insert","lines":["data"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":2},"end":{"row":116,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":3},"end":{"row":116,"column":4},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":85,"column":12},"end":{"row":85,"column":13},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":85,"column":13},"end":{"row":85,"column":14},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":4},"end":{"row":115,"column":23},"action":"remove","lines":["loginAreaResetAfter"]},{"start":{"row":115,"column":4},"end":{"row":115,"column":9},"action":"insert","lines":["login"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":6},"end":{"row":117,"column":6},"action":"remove","lines":["","    login: function(data) {","\t\t//Bridge.tmplTool.render('mainMenu', {});","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":62},"end":{"row":111,"column":42},"action":"remove","lines":["","\t\t\t\tcommonModel.loginAreaResetAfter(data);"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":7},"end":{"row":82,"column":6},"action":"insert","lines":["","    login: function(data) {","\t\t//Bridge.tmplTool.render('mainMenu', {});","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":9},"end":{"row":80,"column":10},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":10},"end":{"row":80,"column":11},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":11},"end":{"row":80,"column":12},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":12},"end":{"row":80,"column":13},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":13},"end":{"row":80,"column":14},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":45},"end":{"row":74,"column":0},"action":"insert","lines":["",""]},{"start":{"row":74,"column":0},"end":{"row":74,"column":16},"action":"insert","lines":["                "]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":16},"end":{"row":74,"column":26},"action":"insert","lines":["loginAfter"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":16},"end":{"row":74,"column":28},"action":"insert","lines":["commonModel."]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":38},"end":{"row":74,"column":40},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":41},"end":{"row":74,"column":42},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":42},"end":{"row":74,"column":43},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":8},"end":{"row":93,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":9},"end":{"row":93,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":4},"end":{"row":103,"column":18},"action":"remove","lines":["loginAreaReset"]},{"start":{"row":103,"column":4},"end":{"row":103,"column":16},"action":"insert","lines":["loginChecker"]}]}],[{"group":"doc","deltas":[{"start":{"row":117,"column":6},"end":{"row":118,"column":0},"action":"insert","lines":["",""]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":118,"column":4},"end":{"row":119,"column":0},"action":"insert","lines":["",""]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":117,"column":6},"end":{"row":120,"column":6},"action":"insert","lines":["","    logoutAfter: function(data) {","        //Bridge.tmplTool.reset({login: {keep_login : Bridge.localStorageTool.get('keepLogin')}, mainMenu: null});","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":118,"column":4},"end":{"row":118,"column":10},"action":"remove","lines":["logout"]},{"start":{"row":118,"column":4},"end":{"row":118,"column":16},"action":"insert","lines":["loginChecker"]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":62},"end":{"row":115,"column":0},"action":"insert","lines":["",""]},{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":4},"end":{"row":115,"column":21},"action":"insert","lines":["loginCheckerAfter"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":4},"end":{"row":115,"column":15},"action":"insert","lines":["commonModel"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":15},"end":{"row":115,"column":16},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":15},"end":{"row":115,"column":16},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":15},"end":{"row":115,"column":16},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":33},"end":{"row":115,"column":35},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":35},"end":{"row":115,"column":36},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":34},"end":{"row":115,"column":35},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":35},"end":{"row":115,"column":36},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":36},"end":{"row":115,"column":37},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":37},"end":{"row":115,"column":38},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":34},"end":{"row":115,"column":38},"action":"remove","lines":["data"]},{"start":{"row":115,"column":34},"end":{"row":115,"column":51},"action":"insert","lines":["data.loginChecker"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":43},"action":"remove","lines":["data"]},{"start":{"row":74,"column":39},"end":{"row":74,"column":59},"action":"insert","lines":["data['reqExecLogin']"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":13},"end":{"row":89,"column":14},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":12},"end":{"row":89,"column":13},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":36},"end":{"row":89,"column":40},"action":"remove","lines":["data"]},{"start":{"row":89,"column":36},"end":{"row":89,"column":57},"action":"insert","lines":["data['reqExecLogout']"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":6},"end":{"row":123,"column":4},"action":"remove","lines":["","    ","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":45},"end":{"row":74,"column":61},"action":"remove","lines":["","                commonModel.loginAfter(data['reqExecLogin']);"]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":45},"end":{"row":74,"column":61},"action":"insert","lines":["","                commonModel.loginAfter(data['reqExecLogin']);"]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":28},"end":{"row":73,"column":42},"action":"remove","lines":["loginAreaReset"]},{"start":{"row":73,"column":28},"end":{"row":73,"column":40},"action":"insert","lines":["loginChecker"]}]}],[{"group":"doc","deltas":[{"start":{"row":106,"column":12},"end":{"row":106,"column":13},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":106,"column":13},"end":{"row":106,"column":14},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":106,"column":14},"end":{"row":106,"column":65},"action":"remove","lines":["Bridge.tmplTool.render('login', data.loginChecker);"]}]}],[{"group":"doc","deltas":[{"start":{"row":106,"column":0},"end":{"row":106,"column":14},"action":"remove","lines":["            //"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":87},"end":{"row":106,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":0},"end":{"row":112,"column":52},"action":"remove","lines":["\t\t\t    //var appModel = Bridge.sessionStorageTool.get('appModel');","\t\t\t    //if (appModel) {","\t\t\t    //   document[appModel].listAreaReset();","\t\t\t    //}","\t\t\t\t//Bridge.tmplTool.render('serviceTimeEdit', {});"]}]}],[{"group":"doc","deltas":[{"start":{"row":107,"column":58},"end":{"row":108,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":4},"end":{"row":110,"column":5},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":5},"end":{"row":110,"column":6},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":6},"end":{"row":110,"column":7},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":7},"end":{"row":110,"column":8},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":8},"end":{"row":110,"column":9},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":8},"end":{"row":110,"column":9},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":7},"end":{"row":110,"column":8},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":7},"end":{"row":110,"column":8},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":8},"end":{"row":110,"column":9},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":9},"end":{"row":110,"column":10},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":10},"end":{"row":110,"column":11},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":11},"end":{"row":112,"column":4},"action":"insert","lines":["","\t\t\t    ","\t\t\t}"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":7},"end":{"row":111,"column":56},"action":"insert","lines":["commonModel.loginCheckerAfter(data.loginChecker);"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":31},"end":{"row":111,"column":36},"action":"remove","lines":["After"]},{"start":{"row":111,"column":31},"end":{"row":111,"column":32},"action":"insert","lines":["F"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":32},"end":{"row":111,"column":33},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":33},"end":{"row":111,"column":34},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":34},"end":{"row":111,"column":35},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":117,"column":6},"end":{"row":120,"column":6},"action":"insert","lines":["","    loginCheckerAfter: function(data) {","        //Bridge.tmplTool.reset({login: {keep_login : Bridge.localStorageTool.get('keepLogin')}, mainMenu: null});","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":118,"column":4},"end":{"row":118,"column":21},"action":"remove","lines":["loginCheckerAfter"]},{"start":{"row":118,"column":4},"end":{"row":118,"column":20},"action":"insert","lines":["loginCheckerFail"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":20},"end":{"row":52,"column":21},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":8},"end":{"row":59,"column":12},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":7},"end":{"row":59,"column":8},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":6},"end":{"row":59,"column":7},"action":"remove","lines":["\t"]}]}]]},"ace":{"folds":[],"scrolltop":813.5,"scrollleft":0,"selection":{"start":{"row":67,"column":38},"end":{"row":67,"column":47},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":109,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1428714461000}