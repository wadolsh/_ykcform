<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title>タイトル</title>
<style type="text/css" src="css/bootstrap.css"></style>
</head>
<body>

    
    <div id="result"></div>
    
    <div id="loginForm"></div>
    
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/bridge.json.js"></script>
    <script src="js/bridge.extend.bootstrap3.js"></script>
    <script type="text/javascript">
	var loginConnector = new Bridge.Connector({tableName : "user"});
	
	// ログイン画面用のメタ情報
	Bridge.fieldMapCache['user'] = {
		login_id : {
			label : "ID",
			validateRule : {
				isNullAble : false,
				typeName : "Email"
			},
			uiMap : {
				_type : "text"
			}
		},
		password : {
			label : "パスワード",
			validateRule : {
				isNullAble : false
			},
			uiMap : {
				_type : "password"
			}
		}
	};
	
	// ログイン情報登録用のメタ情報
	Bridge.fieldMapCache['signUpMeta'] = {
		login_id : {
			label : "ID",
			validateRule : {
				isNullAble : false,
				typeName : "Email"
			},
			uiMap : {
				_type : "text"
			}
		},
		password : {
			label : "パスワード",
			validateRule : {
				isNullAble : false
			},
			uiMap : {
				_type : "password"
			}
		},
		password2 : {
			label : "パスワード(確認用)",
			validateRule : {
				isNullAble : false
			},
			uiMap : {
				_type : "password"
			}
		},
	};
	
	// ログインページ作成
	var Login = Bridge.LoginView.extend({
		
		// 画面作成
		render : function() {
			// superのロジックを実行
			Bridge.LoginView.prototype.render.apply(this, arguments);

			this.$loginButton.addClass('btn btn-inverse');
			this.$logoutButton.addClass('btn');
			this.$signUpButton.addClass('btn');
			this.$registButton.addClass('btn btn-primary');
			this.$moveLoginButton.addClass('btn');
		},
		
		// 登録処理を実装
		regist : function(data) {
			// super
			Bridge.LoginView.prototype.regist.apply(this, arguments);
			log(data);
		},
		
		// ログイン後の動作
		afterLogin : function(data) {
			log("afterLogin");
			this.$messageArea.empty();
			location.href = "/myMenu";
		}
	});
	
	new Login({$area : $('#loginForm'), connector : loginConnector}).render();
    </script>
</body>
</html>